(function(){var e={417:function(e,t,n){"use strict";var i=n(5130),o=n(6768);const r={id:"app"},s={ref:"video",autoplay:""},c={ref:"canvas"},a={key:0},u={key:1};function d(e,t,n,i,d,l){return(0,o.uX)(),(0,o.CE)("div",r,[t[0]||(t[0]=(0,o.Lk)("h1",null,"Liveness Check",-1)),(0,o.Lk)("video",s,null,512),(0,o.Lk)("canvas",c,null,512),d.livenessDetected?((0,o.uX)(),(0,o.CE)("p",a,"Liveness detected!")):((0,o.uX)(),(0,o.CE)("p",u,"Liveness check in progress..."))])}var l=n(7290),h={data(){return{livenessDetected:!1,previousFacePosition:null,blinkCount:0}},async mounted(){try{await this.initLivenessCheck()}catch(e){console.error("Error initializing liveness check:",e)}},methods:{async initLivenessCheck(){try{await l.B0.tinyFaceDetector.loadFromUri("/models"),await l.B0.faceLandmark68Net.loadFromUri("/models"),console.log("Models loaded successfully."),await this.startVideo()}catch(e){console.error("Error loading models or starting video:",e)}},async startVideo(){try{const e=this.$refs.video,t=await navigator.mediaDevices.getUserMedia({video:{}});e.srcObject=t,e.onloadedmetadata=()=>{this.detectFace()}}catch(e){console.error("Error accessing webcam:",e)}},async detectFace(){const e=this.$refs.video,t=this.$refs.canvas;t.width=e.videoWidth,t.height=e.videoHeight;const n={width:e.videoWidth,height:e.videoHeight};l.L0(t,n),setInterval((async()=>{try{const i=await l.R(e,new l.ex).withFaceLandmarks();if(i.length>0){const e=l.Lz(i,n);l.$2.drawDetections(t,e),l.$2.drawFaceLandmarks(t,e);const o=e[0].detection.box;this.previousFacePosition&&this.hasFaceMoved(this.previousFacePosition,o)&&(this.livenessDetected=!0);const r=e[0].landmarks,s=r.getLeftEye(),c=r.getRightEye();this.isEyeClosed(s)||this.isEyeClosed(c)?(this.blinkCount++,this.blinkCount>2&&(this.livenessDetected=!0)):this.blinkCount=0,this.previousFacePosition=o}}catch(i){console.error("Error during face detection:",i)}}),100)},hasFaceMoved(e,t){const n=10;return Math.abs(t.x-e.x)>n||Math.abs(t.y-e.y)>n},isEyeClosed(e){const t=Math.abs(e[1].y-e[5].y);return t<5}}},f=n(1241);const v=(0,f.A)(h,[["render",d],["__scopeId","data-v-7c5b05c6"]]);var y=v;(0,i.Ef)(y).mount("#app")},8082:function(){},7318:function(){},745:function(){}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,r){if(!i){var s=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],r=e[d][2];for(var c=!0,a=0;a<i.length;a++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[a])}))?i.splice(a--,1):(c=!1,r<s&&(s=r));if(c){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[i,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,r,s=i[0],c=i[1],a=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(a)var d=a(n)}for(t&&t(i);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},i=self["webpackChunkliveness_check"]=self["webpackChunkliveness_check"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(417)}));i=n.O(i)})();
//# sourceMappingURL=app.49cb1426.js.map